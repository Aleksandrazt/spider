<Window x:Class="Spider.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Spider - CRUD приложение" 
        Height="700" 
        Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">

    <Window.Resources>
        <!-- Стиль для вкладок -->
        <Style TargetType="TabItem">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="20,10"/>
        </Style>

        <!-- Стиль для кнопок -->
        <Style TargetType="Button" x:Key="PrimaryButton">
            <Setter Property="Background" Value="#2196F3"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1976D2"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для маленьких кнопок -->
        <Style TargetType="Button" x:Key="SmallButton">
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="3"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопки "Добавить" -->
        <Style TargetType="Button" x:Key="AddButton">
            <Setter Property="Background" Value="#4CAF50"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#45A049"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для DataGrid с чередованием цветов строк -->
        <Style TargetType="DataGrid" x:Key="AlternatingRowsDataGrid">
            <Setter Property="Background" Value="White"/>
            <Setter Property="AlternatingRowBackground" Value="#E3F2FD"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
        </Style>

        <!-- Стиль для DataGrid Docker с улучшенным контрастом -->
        <Style TargetType="DataGrid" x:Key="DockerDataGrid">
            <Setter Property="Background" Value="White"/>
            <Setter Property="AlternatingRowBackground" Value="#FFF3E0"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
            <Setter Property="RowBackground" Value="#FAFAFA"/>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Главный TabControl с вкладками -->
        <TabControl TabStripPlacement="Top" 
                    Margin="10"
                    Background="White">

            <!-- Вкладка 1: Категории -->
            <TabItem Header="📁 Категории">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Левая панель: список категорий -->
                    <Border Grid.Column="0" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4"
                            Margin="0,0,10,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Заголовок -->
                            <TextBlock Grid.Row="0" 
                                     Text="Категории" 
                                     FontSize="16" 
                                     FontWeight="Bold"
                                     Margin="10"
                                     Foreground="#333"/>

                            <!-- Список категорий с кнопками -->
                            <ListBox Grid.Row="1" 
                                   x:Name="CategoriesListBox"
                                   Margin="10,0"
                                   BorderThickness="0"
                                   ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                                <!-- Стиль для контейнера элементов списка -->
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="0"/>
                                    </Style>
                                </ListBox.ItemContainerStyle>

                                <!-- Шаблон элемента списка -->
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="#E0E0E0" 
                                              BorderThickness="0,0,0,1" 
                                              Padding="10,8">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="64"/>
                                                </Grid.ColumnDefinitions>

                                                <!-- Название категории -->
                                                <StackPanel Grid.Column="0" 
                                                          Margin="0,0,10,0">
                                                    <TextBlock Text="{Binding Name}" 
                                                             FontWeight="SemiBold"
                                                             FontSize="13"
                                                             Foreground="#333"
                                                             TextTrimming="CharacterEllipsis"/>
                                                    <TextBlock Text="{Binding Description}" 
                                                             FontSize="11"
                                                             Foreground="#666"
                                                             TextTrimming="CharacterEllipsis"/>
                                                </StackPanel>

                                                <!-- Кнопки действий -->
                                                <StackPanel Grid.Column="1" 
                                                          Orientation="Horizontal"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Right">
                                                    <Button Content="✏️" 
                                                          Style="{StaticResource SmallButton}"
                                                          Background="#FF9800"
                                                          Foreground="White"
                                                          Width="28" Height="24"
                                                          Margin="2"
                                                          ToolTip="Редактировать"
                                                          Tag="{Binding}"
                                                          Command="{Binding DataContext.EditCategoryCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                          CommandParameter="{Binding}"/>
                                                    <Button Content="🗑️" 
                                                          Style="{StaticResource SmallButton}"
                                                          Background="#F44336"
                                                          Foreground="White"
                                                          Width="28" Height="24"
                                                          Margin="2"
                                                          ToolTip="Удалить"
                                                          Tag="{Binding}"
                                                          Command="{Binding DataContext.DeleteCategoryCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                          CommandParameter="{Binding}"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <!-- Большая кнопка "Добавить категорию" -->
                            <Button Grid.Row="2" 
                                  Content="➕ Добавить категорию" 
                                  Style="{StaticResource AddButton}"
                                  Margin="10"
                                  x:Name="AddCategoryButton"/>
                        </Grid>
                    </Border>

                    <!-- Правая панель: данные категории -->
                    <Border Grid.Column="1" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Заголовок с названием выбранной категории -->
                            <StackPanel Grid.Row="0" 
                                      Orientation="Horizontal"
                                      Margin="10">
                                <TextBlock Text="Данные категории: " 
                                         FontSize="16" 
                                         FontWeight="Bold"
                                         Foreground="#333"/>
                                <TextBlock x:Name="SelectedCategoryName" 
                                         Text="(выберите категорию)" 
                                         FontSize="16" 
                                         FontWeight="SemiBold"
                                         Foreground="#2196F3"/>
                            </StackPanel>

                            <!-- DataGrid с данными или сообщение о выборе категории -->
                            <Grid Grid.Row="1" Margin="10,0">
                                <!-- DataGrid с данными -->
                                <DataGrid x:Name="CategoryDataGrid"
                                        Style="{StaticResource AlternatingRowsDataGrid}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Название" 
                                                          Binding="{Binding Name}" 
                                                          Width="*"/>
                                        <DataGridTextColumn Header="Значение" 
                                                          Binding="{Binding Value}" 
                                                          Width="2*"/>
                                        <DataGridTemplateColumn Header="Действия" Width="120">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal" 
                                                              HorizontalAlignment="Center">
                                                        <Button Content="✏️" 
                                                              Style="{StaticResource SmallButton}"
                                                              Background="#FF9800"
                                                              Foreground="White"
                                                              Width="28" Height="24"
                                                              Margin="2"
                                                              ToolTip="Редактировать"
                                                              Tag="{Binding}"
                                                              Command="{Binding DataContext.EditCategoryDataCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                              CommandParameter="{Binding}"/>
                                                        <Button Content="🗑️" 
                                                              Style="{StaticResource SmallButton}"
                                                              Background="#F44336"
                                                              Foreground="White"
                                                              Width="28" Height="24"
                                                              Margin="2"
                                                              ToolTip="Удалить"
                                                              Tag="{Binding}"
                                                              Command="{Binding DataContext.DeleteCategoryDataCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                              CommandParameter="{Binding}"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                    </DataGrid.Columns>
                                </DataGrid>

                                <!-- Сообщение когда категория не выбрана -->
                                <Border x:Name="NoCategoryMessage"
                                      Background="#F8F9FA"
                                      BorderBrush="#E9ECEF"
                                      BorderThickness="1"
                                      CornerRadius="8"
                                      Padding="40,60"
                                      Visibility="Visible">
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock Text="📁" 
                                                 FontSize="48" 
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,16"
                                                 Foreground="#6C757D"/>
                                        <TextBlock Text="Выберите категорию" 
                                                 FontSize="18" 
                                                 FontWeight="SemiBold"
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,8"
                                                 Foreground="#495057"/>
                                        <TextBlock Text="для просмотра и управления данными" 
                                                 FontSize="14" 
                                                 HorizontalAlignment="Center"
                                                 Foreground="#6C757D"/>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Большая кнопка "Добавить данные" -->
                            <Button Grid.Row="2" 
                                  Content="➕ Добавить данные" 
                                  Style="{StaticResource AddButton}"
                                  Margin="10"
                                  x:Name="AddCategoryDataButton"
                                  Visibility="Collapsed"/>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Вкладка 2: Команды -->
            <TabItem Header="⚡ Команды">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Левая панель: список команд -->
                    <Border Grid.Column="0" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4"
                            Margin="0,0,10,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Заголовок -->
                            <TextBlock Grid.Row="0" 
                                     Text="Команды" 
                                     FontSize="16" 
                                     FontWeight="Bold"
                                     Margin="10"
                                     Foreground="#333"/>

                            <!-- Список команд с кнопками -->
                            <ListBox Grid.Row="1" 
                                   x:Name="CommandsListBox"
                                   Margin="10,0"
                                   BorderThickness="0"
                                   ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                                <!-- Стиль для контейнера элементов списка -->
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="0"/>
                                    </Style>
                                </ListBox.ItemContainerStyle>

                                <!-- Шаблон элемента списка -->
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="#E0E0E0" 
                                              BorderThickness="0,0,0,1" 
                                              Padding="10,8">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="64"/>
                                                </Grid.ColumnDefinitions>

                                                <!-- Название команды -->
                                                <StackPanel Grid.Column="0" 
                                                          Margin="0,0,10,0">
                                                    <TextBlock Text="{Binding Name}" 
                                                             FontWeight="SemiBold"
                                                             FontSize="13"
                                                             Foreground="#333"
                                                             TextTrimming="CharacterEllipsis"/>
                                                    <TextBlock Text="{Binding CommandText}" 
                                                             FontSize="11"
                                                             Foreground="#666"
                                                             TextTrimming="CharacterEllipsis"/>
                                                </StackPanel>

                                                <!-- Кнопки действий (только редактирование и удаление) -->
                                                <StackPanel Grid.Column="1" 
                                                          Orientation="Horizontal"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Right">
                                                    <Button Content="✏️" 
                                                          Style="{StaticResource SmallButton}"
                                                          Background="#FF9800"
                                                          Foreground="White"
                                                          Width="28" Height="24"
                                                          Margin="2"
                                                          ToolTip="Редактировать"
                                                          Tag="{Binding}"
                                                          Command="{Binding DataContext.EditCommandCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                          CommandParameter="{Binding}"/>
                                                    <Button Content="🗑️" 
                                                          Style="{StaticResource SmallButton}"
                                                          Background="#F44336"
                                                          Foreground="White"
                                                          Width="28" Height="24"
                                                          Margin="2"
                                                          ToolTip="Удалить"
                                                          Tag="{Binding}"
                                                          Command="{Binding DataContext.DeleteCommandCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                          CommandParameter="{Binding}"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <!-- Большая кнопка "Добавить команду" -->
                            <Button Grid.Row="2" 
                                  Content="➕ Добавить команду" 
                                  Style="{StaticResource AddButton}"
                                  Margin="10"
                                  x:Name="AddCommandButton"/>
                        </Grid>
                    </Border>

                    <!-- Правая панель: выполнение команды -->
                    <Border Grid.Column="1" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Заголовок с названием выбранной команды -->
                            <StackPanel Grid.Row="0" 
                                      Orientation="Horizontal"
                                      Margin="10">
                                <TextBlock Text="Команда: " 
                                         FontSize="16" 
                                         FontWeight="Bold"
                                         Foreground="#333"/>
                                <TextBlock x:Name="SelectedCommandName" 
                                         Text="(выберите команду)" 
                                         FontSize="16" 
                                         FontWeight="SemiBold"
                                         Foreground="#2196F3"/>
                            </StackPanel>

                            <!-- Панель с аргументами и кнопками управления -->
                            <Grid Grid.Row="1" 
                                  Margin="10,0,10,10"
                                  x:Name="CommandControlPanel"
                                  Visibility="Collapsed">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Поле для дополнительных аргументов -->
                                <StackPanel Grid.Row="0" Margin="0,0,0,10">
                                    <TextBlock Text="Дополнительные аргументы:" 
                                             FontSize="13"
                                             FontWeight="SemiBold"
                                             Margin="0,0,0,5"
                                             Foreground="#333"/>
                                    <TextBox x:Name="AdditionalArgumentsTextBox"
                                           Height="40"
                                           Padding="10"
                                           FontSize="13"
                                           VerticalContentAlignment="Center"
                                           BorderBrush="#E0E0E0"
                                           BorderThickness="2"/>
                                </StackPanel>

                                <!-- Кнопки управления -->
                                <StackPanel Grid.Row="1" 
                                          Orientation="Horizontal"
                                          HorizontalAlignment="Left">
                                    <Button x:Name="ExecuteCommandButton"
                                          Content="▶️ Запустить" 
                                          Style="{StaticResource PrimaryButton}"
                                          Background="#4CAF50"
                                          Margin="0,0,10,0"/>
                                    <Button x:Name="StopCommandButton"
                                          Content="⛔ Остановить" 
                                          Style="{StaticResource PrimaryButton}"
                                          Background="#F44336"
                                          Margin="0,0,10,0"
                                          IsEnabled="False"/>
                                    <Button x:Name="ClearOutputButton"
                                          Content="🗑️ Очистить вывод" 
                                          Style="{StaticResource PrimaryButton}"
                                          Background="#607D8B"/>
                                </StackPanel>
                            </Grid>

                            <!-- Область вывода команды или сообщение о выборе -->
                            <Grid Grid.Row="2" Margin="10">
                                <!-- TextBox для вывода команды -->
                                <Border x:Name="OutputArea"
                                      Background="#1E1E1E"
                                      CornerRadius="4"
                                      Visibility="Collapsed">
                                    <ScrollViewer VerticalScrollBarVisibility="Auto"
                                                HorizontalScrollBarVisibility="Auto">
                                        <TextBox x:Name="CommandOutputTextBox"
                                               IsReadOnly="True"
                                               Background="Transparent"
                                               Foreground="#D4D4D4"
                                               FontFamily="Consolas"
                                               FontSize="12"
                                               BorderThickness="0"
                                               Padding="15"
                                               TextWrapping="NoWrap"
                                               VerticalScrollBarVisibility="Auto"
                                               HorizontalScrollBarVisibility="Auto"/>
                                    </ScrollViewer>
                                </Border>

                                <!-- Сообщение когда команда не выбрана -->
                                <Border x:Name="NoCommandMessage"
                                      Background="#F8F9FA"
                                      BorderBrush="#E9ECEF"
                                      BorderThickness="1"
                                      CornerRadius="8"
                                      Padding="40,60"
                                      Visibility="Visible">
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock Text="⚡" 
                                                 FontSize="48" 
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,16"
                                                 Foreground="#6C757D"/>
                                        <TextBlock Text="Выберите команду" 
                             FontSize="18" 
                                                 FontWeight="SemiBold"
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,8"
                                                 Foreground="#495057"/>
                                        <TextBlock Text="для запуска и просмотра вывода" 
                                                 FontSize="14" 
                             HorizontalAlignment="Center" 
                                                 Foreground="#6C757D"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Вкладка 3: Docker проекты -->
            <TabItem Header="🐳 Docker">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Левая панель: список проектов -->
                    <Border Grid.Column="0" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4"
                            Margin="0,0,10,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Заголовок -->
                            <TextBlock Grid.Row="0" 
                                     Text="Docker Проекты" 
                                     FontSize="16" 
                                     FontWeight="Bold"
                                     Margin="10"
                                     Foreground="#333"/>

                            <!-- Список проектов -->
                            <ListBox Grid.Row="1" 
                                   x:Name="DockerProjectsListBox"
                                   Margin="10,0"
                                   BorderThickness="0"
                                   ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="0"/>
                                    </Style>
                                </ListBox.ItemContainerStyle>

                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="#E0E0E0" 
                                              BorderThickness="0,0,0,1" 
                                              Padding="10,8">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="64"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0" 
                                                          Margin="0,0,10,0">
                                                    <TextBlock Text="{Binding Name}" 
                                                             FontWeight="SemiBold"
                                                             FontSize="13"
                                                             Foreground="#333"
                                                             TextTrimming="CharacterEllipsis"/>
                                                    <TextBlock Text="{Binding DockerComposePath}" 
                                                             FontSize="10"
                                                             Foreground="#666"
                                                             TextTrimming="CharacterEllipsis"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1" 
                                                          Orientation="Horizontal"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Right">
                                                    <Button Content="✏️" 
                                                          Style="{StaticResource SmallButton}"
                                                          Background="#FF9800"
                                                          Foreground="White"
                                                          Width="28" Height="24"
                                                          Margin="2"
                                                          ToolTip="Редактировать"
                                                          Tag="{Binding}"
                                                          Command="{Binding DataContext.EditDockerProjectCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                          CommandParameter="{Binding}"/>
                                                    <Button Content="🗑️" 
                                                          Style="{StaticResource SmallButton}"
                                                          Background="#F44336"
                                                          Foreground="White"
                                                          Width="28" Height="24"
                                                          Margin="2"
                                                          ToolTip="Удалить"
                                                          Tag="{Binding}"
                                                          Command="{Binding DataContext.DeleteDockerProjectCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                          CommandParameter="{Binding}"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <!-- Кнопка "Добавить проект" -->
                            <Button Grid.Row="2" 
                                  Content="➕ Добавить проект" 
                                  Style="{StaticResource AddButton}"
                                  Margin="10"
                                  x:Name="AddDockerProjectButton"/>
                        </Grid>
                    </Border>

                    <!-- Правая панель: образы и управление -->
                    <Border Grid.Column="1" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="300"/>
                            </Grid.RowDefinitions>

                            <!-- Заголовок с названием проекта -->
                            <StackPanel Grid.Row="0" 
                                      Orientation="Horizontal"
                                      Margin="10">
                                <TextBlock Text="Проект: " 
                                         FontSize="16" 
                                         FontWeight="Bold"
                                         Foreground="#333"/>
                                <TextBlock x:Name="SelectedDockerProjectName" 
                                         Text="(выберите проект)" 
                                         FontSize="16" 
                                         FontWeight="SemiBold"
                                         Foreground="#2196F3"/>
                            </StackPanel>

                            <!-- Панель управления всеми сервисами -->
                            <Grid Grid.Row="1" 
                                  Margin="10,0,10,10"
                                  x:Name="DockerControlPanel"
                                  Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="RefreshDockerImagesButton"
                                          Content="🔄 Обновить" 
                                          Style="{StaticResource PrimaryButton}"
                                          Background="#2196F3"
                                          Margin="0,0,10,0"/>
                                    <Button x:Name="StartAllDockerImagesButton"
                                          Content="▶️ Запустить все" 
                                          Style="{StaticResource PrimaryButton}"
                                          Background="#4CAF50"
                                          Margin="0,0,10,0"/>
                                    <Button x:Name="StopAllDockerImagesButton"
                                          Content="⛔ Остановить все" 
                                          Style="{StaticResource PrimaryButton}"
                                          Background="#F44336"
                                          Margin="0,0,10,0"/>
                                    <Button x:Name="ClearDockerOutputButton"
                                          Content="🗑️ Очистить вывод" 
                                          Style="{StaticResource PrimaryButton}"
                                          Background="#607D8B"/>
                                </StackPanel>
                            </Grid>

                            <!-- Список образов или сообщение -->
                            <Grid Grid.Row="2" Margin="10,0,10,10">
                                <!-- DataGrid с образами -->
                                <DataGrid x:Name="DockerImagesDataGrid"
                                        Style="{StaticResource DockerDataGrid}"
                                        Visibility="Collapsed">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Сервис" 
                                                          Binding="{Binding ServiceName}" 
                                                          Width="*"/>
                                        <DataGridTemplateColumn Header="Статус" Width="150">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Status}" 
                                                             FontWeight="SemiBold"
                                                             Foreground="{Binding StatusColor}"/>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTemplateColumn Header="Действия" Width="220">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal" 
                                                              HorizontalAlignment="Center">
                                                        <Button Content="▶️" 
                                                              Style="{StaticResource SmallButton}"
                                                              Background="#4CAF50"
                                                              Foreground="White"
                                                              Width="32" Height="24"
                                                              Margin="2"
                                                              ToolTip="Запустить"
                                                              Tag="{Binding}"
                                                              Command="{Binding DataContext.StartDockerImageCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                              CommandParameter="{Binding}"/>
                                                        <Button Content="⛔" 
                                                              Style="{StaticResource SmallButton}"
                                                              Background="#F44336"
                                                              Foreground="White"
                                                              Width="32" Height="24"
                                                              Margin="2"
                                                              ToolTip="Остановить"
                                                              Tag="{Binding}"
                                                              Command="{Binding DataContext.StopDockerImageCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                              CommandParameter="{Binding}"/>
                                                        <Button Content="🔨" 
                                                              Style="{StaticResource SmallButton}"
                                                              Background="#FF9800"
                                                              Foreground="White"
                                                              Width="32" Height="24"
                                                              Margin="2"
                                                              ToolTip="Пересобрать и запустить"
                                                              Tag="{Binding}"
                                                              Command="{Binding DataContext.RebuildDockerImageCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                              CommandParameter="{Binding}"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                    </DataGrid.Columns>
                                </DataGrid>

                                <!-- Сообщение когда проект не выбран -->
                                <Border x:Name="NoDockerProjectMessage"
                                      Background="#F8F9FA"
                                      BorderBrush="#E9ECEF"
                                      BorderThickness="1"
                                      CornerRadius="8"
                                      Padding="40,60"
                                      Visibility="Visible">
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock Text="🐳" 
                                                 FontSize="48" 
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,16"
                                                 Foreground="#6C757D"/>
                                        <TextBlock Text="Выберите Docker проект" 
                             FontSize="18" 
                                                 FontWeight="SemiBold"
                                                 HorizontalAlignment="Center"
                                                 Margin="0,0,0,8"
                                                 Foreground="#495057"/>
                                        <TextBlock Text="для управления образами" 
                                                 FontSize="14" 
                             HorizontalAlignment="Center" 
                                                 Foreground="#6C757D"/>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Область вывода логов билда -->
                            <Border Grid.Row="3" 
                                  Margin="10"
                                  Background="#1E1E1E"
                                  CornerRadius="4">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    
                                    <TextBlock Grid.Row="0"
                                             Text="Логи Docker"
                                             FontSize="12"
                                             FontWeight="SemiBold"
                                             Foreground="#D4D4D4"
                                             Margin="15,10,15,5"/>
                                    
                                    <ScrollViewer Grid.Row="1"
                                                VerticalScrollBarVisibility="Auto"
                                                HorizontalScrollBarVisibility="Auto">
                                        <TextBox x:Name="DockerBuildOutputTextBox"
                                               IsReadOnly="True"
                                               Background="Transparent"
                                               Foreground="#D4D4D4"
                                               FontFamily="Consolas"
                                               FontSize="11"
                                               BorderThickness="0"
                                               Padding="15,5,15,15"
                                               TextWrapping="NoWrap"
                                               VerticalScrollBarVisibility="Auto"
                                               HorizontalScrollBarVisibility="Auto"/>
                                    </ScrollViewer>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Вкладка 4: Скриншоты -->
            <TabItem Header="📸 Скриншоты">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Панель действий -->
                    <Border Grid.Row="0" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4"
                            Margin="0,0,0,10"
                            Padding="15">
                        <StackPanel>
                            <!-- Заголовок -->
                            <TextBlock Text="Быстрые действия" 
                                     FontSize="16" 
                                     FontWeight="Bold"
                                     Margin="0,0,0,15"
                                     Foreground="#333"/>
                            
                            <!-- Кнопки действий -->
                            <WrapPanel>
                                <Button x:Name="TakeScreenshotButton"
                                      Content="📸 Сделать скриншот"
                                      Style="{StaticResource PrimaryButton}"
                                      Background="#4CAF50"
                                      Margin="0,0,10,10"
                                      Padding="20,15"
                                      FontSize="15"/>
                                <Button x:Name="TakeFullScreenshotButton"
                                      Content="🖵 Полный экран"
                                      Style="{StaticResource PrimaryButton}"
                                      Background="#2196F3"
                                      Margin="0,0,10,10"
                                      Padding="20,15"
                                      FontSize="15"/>
                                <Button x:Name="StartStopRecordingButton"
                                      Content="⏺️ Начать запись"
                                      Style="{StaticResource PrimaryButton}"
                                      Background="#F44336"
                                      Margin="0,0,10,10"
                                      Padding="20,15"
                                      FontSize="15"/>
                            </WrapPanel>
                            
                            <!-- Статус -->
                            <Border Background="#F5F5F5"
                                  BorderBrush="#E0E0E0"
                                  BorderThickness="1"
                                  CornerRadius="4"
                                  Padding="10"
                                  Margin="0,10,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Статус: " 
                                             FontWeight="SemiBold"
                                             Foreground="#666"/>
                                    <TextBlock x:Name="ScreenshotStatusText"
                                             Text="Готов к работе"
                                             Foreground="#4CAF50"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Настройки -->
                    <Border Grid.Row="1" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="1" 
                            CornerRadius="4"
                            Padding="15">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel>
                                <!-- Заголовок настроек -->
                                <TextBlock Text="Настройки" 
                                         FontSize="16" 
                                         FontWeight="Bold"
                                         Margin="0,0,0,15"
                                         Foreground="#333"/>

                                <!-- Пути сохранения -->
                                <GroupBox Header="Пути сохранения" 
                                        Margin="0,0,0,15"
                                        Padding="10">
                                    <StackPanel>
                                        <!-- Папка скриншотов -->
                                        <StackPanel Margin="0,0,0,10">
                                            <TextBlock Text="Папка для скриншотов:" 
                                                     FontWeight="SemiBold"
                                                     Margin="0,0,0,5"/>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBox x:Name="ScreenshotPathTextBox"
                                                       Grid.Column="0"
                                                       IsReadOnly="True"
                                                       Padding="8"
                                                       VerticalContentAlignment="Center"/>
                                                <Button Grid.Column="1"
                                                      x:Name="SelectScreenshotFolderButton"
                                                      Content="📁 Обзор"
                                                      Style="{StaticResource PrimaryButton}"
                                                      Background="#607D8B"
                                                      Margin="5,0,0,0"/>
                                                <Button Grid.Column="2"
                                                      x:Name="OpenScreenshotFolderButton"
                                                      Content="🔍 Открыть"
                                                      Style="{StaticResource PrimaryButton}"
                                                      Background="#9E9E9E"
                                                      Margin="5,0,0,0"/>
                                            </Grid>
                                        </StackPanel>

                                        <!-- Папка видео -->
                                        <StackPanel>
                                            <TextBlock Text="Папка для видео:" 
                                                     FontWeight="SemiBold"
                                                     Margin="0,0,0,5"/>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBox x:Name="VideoPathTextBox"
                                                       Grid.Column="0"
                                                       IsReadOnly="True"
                                                       Padding="8"
                                                       VerticalContentAlignment="Center"/>
                                                <Button Grid.Column="1"
                                                      x:Name="SelectVideoFolderButton"
                                                      Content="📁 Обзор"
                                                      Style="{StaticResource PrimaryButton}"
                                                      Background="#607D8B"
                                                      Margin="5,0,0,0"/>
                                                <Button Grid.Column="2"
                                                      x:Name="OpenVideoFolderButton"
                                                      Content="🔍 Открыть"
                                                      Style="{StaticResource PrimaryButton}"
                                                      Background="#9E9E9E"
                                                      Margin="5,0,0,0"/>
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>
                                </GroupBox>

                                <!-- Параметры сохранения -->
                                <GroupBox Header="Параметры сохранения" 
                                        Margin="0,0,0,15"
                                        Padding="10">
                                    <StackPanel>
                                        <CheckBox x:Name="SaveToFileCheckBox"
                                                Content="Сохранять в файл"
                                                IsChecked="True"
                                                Margin="0,0,0,5"/>
                                        <CheckBox x:Name="CopyToClipboardCheckBox"
                                                Content="Копировать в буфер обмена"
                                                IsChecked="True"
                                                Margin="0,0,0,10"/>
                                        
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                            <TextBlock Text="Формат изображения:" 
                                                     FontWeight="SemiBold"
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,10,0"/>
                                            <ComboBox x:Name="ImageFormatComboBox"
                                                    Width="100"
                                                    SelectedIndex="0">
                                                <ComboBoxItem Content="PNG"/>
                                                <ComboBoxItem Content="JPEG"/>
                                                <ComboBoxItem Content="BMP"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </StackPanel>
                                </GroupBox>

                                <!-- Горячие клавиши -->
                                <GroupBox Header="Горячие клавиши" 
                                        Margin="0,0,0,15"
                                        Padding="10">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" 
                                                  Margin="0,0,0,10">
                                            <TextBlock Text="⚠️ Горячие клавиши работают глобально во всей системе"
                                                     FontSize="11"
                                                     Foreground="#FF9800"
                                                     VerticalAlignment="Center"
                                                     TextWrapping="Wrap"/>
                                            <Button Content="⚙️ Настроить"
                                                  Background="#FF9800"
                                                  Foreground="White"
                                                  Padding="10,5"
                                                  Margin="10,0,0,0"
                                                  x:Name="ConfigureHotkeysButton"
                                                  Style="{StaticResource PrimaryButton}"/>
                                        </StackPanel>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            
                                            <TextBlock Grid.Row="0" Grid.Column="0"
                                                     Text="Скриншот области:"
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,10,5"/>
                                            <TextBox Grid.Row="0" Grid.Column="1"
                                                   x:Name="ScreenshotHotkeyTextBox"
                                                   IsReadOnly="True"
                                                   Padding="8"
                                                   Margin="0,0,0,5"/>
                                            
                                            <TextBlock Grid.Row="1" Grid.Column="0"
                                                     Text="Полный экран:"
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,10,5"/>
                                            <TextBox Grid.Row="1" Grid.Column="1"
                                                   x:Name="FullScreenshotHotkeyTextBox"
                                                   IsReadOnly="True"
                                                   Padding="8"
                                                   Margin="0,0,0,5"/>
                                            
                                            <TextBlock Grid.Row="2" Grid.Column="0"
                                                     Text="Запись видео:"
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,10,5"/>
                                            <TextBox Grid.Row="2" Grid.Column="1"
                                                   x:Name="VideoRecordHotkeyTextBox"
                                                   IsReadOnly="True"
                                                   Padding="8"/>
                                        </Grid>
                                    </StackPanel>
                                </GroupBox>

                                <!-- Кнопка сохранения -->
                                <Button x:Name="SaveScreenshotSettingsButton"
                                      Content="💾 Сохранить настройки"
                                      Style="{StaticResource PrimaryButton}"
                                      Background="#4CAF50"
                                      HorizontalAlignment="Left"
                                      Padding="30,12"
                                      FontSize="14"/>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </TabItem>

        </TabControl>
    </Grid>
</Window>